<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 mt-6">
  <div class="flex items-center justify-between mb-6">
    <h3 class="text-lg font-semibold text-gray-900">Commentaires</h3>
    <span class="text-sm text-gray-500">{{ this.quizComments.length }} commentaire(s)</span>
  </div>
  <form [formGroup]="commentForm" (ngSubmit)="onSubmitComment()" class="mb-6">
    <div class="space-y-4">
      <div>
        <p class="block text-sm font-semibold text-gray-700 mb-2">
          Notez ce quiz
        </p>
        <div class="flex space-x-1">
          @for (star of [1,2,3,4,5]; track star) {
            <a (click)="setRating(star)">
              <img
                class="w-8 h-8 cursor-pointer transition-transform"
                [src]="star <= commentForm.get('rating')?.value
             ? 'star-filled.svg'
             : 'star-outline.svg'"
                alt="star"
              />
            </a>

          }
        </div>
      </div>
      <div>
        <label for="comment" class="block text-sm font-semibold text-gray-700 mb-2">
          Ajouter un commentaire
        </label>
        <textarea
          id="comment"
          formControlName="comment"
          rows="3"
          class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors resize-none"
          placeholder="Partagez votre avis sur ce quiz..."
        ></textarea>
      </div>
      <div class="flex justify-end">
        <button
          type="submit"
          [disabled]="!commentForm.valid || isSubmitting"
          class="inline-flex items-center px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
        >
          {{ isSubmitting ? 'Publication...' : 'Publier' }}
        </button>
      </div>
    </div>
  </form>
  <app-comments [comments]="this.quizComments" [ratingComment]="quizRating"></app-comments>
</div>
